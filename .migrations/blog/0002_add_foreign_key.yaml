version: '1.0'
name: add_foreign_key
namespace: blog
dependencies:
- blog.0001_initial
operations:
- type: AddForeignKey
  table_name: user
  foreign_key:
    column_name: uploaded_file_model_id
    reference_table: uploaded_file_model
    reference_column: user_id
    on_delete: CASCADE
    on_update: CASCADE
- type: AddForeignKey
  table_name: conversation_session_model
  foreign_key:
    column_name: uploaded_file_model_id
    reference_table: uploaded_file_model
    reference_column: user_id
    on_delete: CASCADE
    on_update: CASCADE
- type: AddForeignKey
  table_name: file_type_model
  foreign_key:
    column_name: uploaded_file_model_id
    reference_table: uploaded_file_model
    reference_column: user_id
    on_delete: CASCADE
    on_update: CASCADE
- type: AddForeignKey
  table_name: uploaded_file_model
  foreign_key:
    column_name: uploaded_file_model_id
    reference_table: uploaded_file_model
    reference_column: user_id
    on_delete: CASCADE
    on_update: CASCADE
- type: AddForeignKey
  table_name: uploaded_file_model
  foreign_key:
    column_name: file_processing_task_model_id
    reference_table: file_processing_task_model
    reference_column: uploaded_file_id
    on_delete: CASCADE
    on_update: CASCADE
- type: AddForeignKey
  table_name: file_processing_task_model
  foreign_key:
    column_name: file_processing_result_model_id
    reference_table: file_processing_result_model
    reference_column: processing_task_id
    on_delete: CASCADE
    on_update: CASCADE
created_at: 2026-01-24 00:44:01.002777
