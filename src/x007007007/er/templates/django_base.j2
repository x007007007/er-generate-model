{# Django基类模板 - 用于生成可继承的基类 #}
from django.db import models
{%- for template_name, template_info in model.templates.items() %}
{%- if template_info.export_path %}
{%- set base_class_name = template_name | title | replace('_', '') + 'Mixin' %}

class {{ base_class_name }}(models.Model):
{%- for col in template_info.columns %}
{%- set field_type, params = col | django_field_type %}
{%- set param_list = [] %}
{%- if 'max_length' in params %}
{%- set _ = param_list.append('max_length=' + params.max_length|string) %}
{%- endif %}
{%- if 'max_digits' in params %}
{%- set _ = param_list.append('max_digits=' + params.max_digits|string) %}
{%- endif %}
{%- if 'decimal_places' in params %}
{%- set _ = param_list.append('decimal_places=' + params.decimal_places|string) %}
{%- endif %}
{%- if col.is_pk %}
{%- set _ = param_list.append('primary_key=True') %}
{%- endif %}
{%- if not col.nullable %}
{%- set _ = param_list.append('null=' + col.nullable|string) %}
{%- endif %}
{%- if col.default %}
{%- set _ = param_list.append('default=' + col.default|string) %}
{%- endif %}
{%- if col.comment %}
{%- set _ = param_list.append('help_text="' + col.comment + '"') %}
{%- endif %}
    {{ col.name }} = models.{{ field_type }}({% if param_list %}{{ param_list|join(', ') }}{% endif %})
{%- endfor %}

    class Meta:
        abstract = True
{%- if template_info.export_path %}
        # Export path: {{ template_info.export_path }}
{%- endif %}

{%- endif %}
{%- endfor %}

